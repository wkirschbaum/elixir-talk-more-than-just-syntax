<html>
    <head>
        <link rel="stylesheet" href="css/reveal.css">
        <link rel="stylesheet" href="css/theme/solarized.css">
        <link rel="stylesheet" href="css/styles/atom-one-dark.css">
    </head>
    <body>
        <div class="reveal">
            <div class="slides">


<section>
  <h1>Elixir</h1>
  <h3>More than just syntax</h3>
</section>

<section>
  <section>
    <h2>Wilhelm Kirschbaum</h2>
    <h4>[ @wkirschbaum ]</h4>
    <h4>Prodigy Finance</h4>
  </section>
  <section>
    I like languages :)
  </section>
  <section>
    <h2>C#</h2>
    <pre><code data-trim data-noescape>
public class WeHaveObjects
{
   public static void Main()
   {
      System.Console.WriteLine("Hello, World!");
   }
}
    </code></pre>
  </section>
  <section>
    <h2>Ruby</h2>
    <pre><code data-trim data-noescape>
puts 'This is so liberating!'
    </code></pre>
  </section>
  <section>
    <h2>Go</h2>
    <pre><code data-trim data-noescape>
package main
import "fmt"
func main() {
  fmt.Println("So fast!!")
}
    </code></pre>
  </section>
  <section>
    <h2>Ruby (again)</h2>
    <pre><code data-trim data-noescape>
def method_missing(*args)
  puts 'Really??'
end
    </code></pre>
  </section>
</section>

<section>
  <section>
    <h2>What is Elixir?</h2>
  </section>
  <section>
    Elixir is a dynamic, functional language (with beautiful syntax),
    designed for building scalable and maintainable applications.
  </section>
  <section>
    Created by José Valim
  </section>
  <section>
    Built on the Erlang virtual machine (BEAM)
  </section>
  <section>
    Hex
  </section>
  <section>
    Mix
  </section>
</section>
<section>
  <section>
    <h2>Testing Elixir code</h2>
  </section>
  <section>
    <pre><code class="bash" data-trim data-noescape>
mix new romans
    </code></pre>

    <pre><code class="bash" data-trim data-noescape>
$ tree -d romans/
romans/
├── _build
│   └── dev
│       ├── consolidated
│       └── lib
│           └── romans
│               └── ebin
├── config
├── lib
└── test

9 directories
    </code></pre>
  </section>
  <section>
  <pre><code class="elixir" data-trim data-noescape>
  # test/romans_test.exs
  defmodule RomansTest do
    use ExUnit.Case, async: true
    doctest Romans

    describe "Roman.convert/1" do
      test "converts 'I' to 1" do
        assert Romans.convert("I") == 1
      end
    end
  end
  </code></pre>

</section>
<section>

  <pre><code class="bash" data-trim data-noescape>
  $ mix test
  Compiling 1 file (.ex)
  Generated romans app
  ** (CompileError) test/romans_test.exs:3: module Romans is not loaded and could not be found
      (ex_unit) expanding macro: ExUnit.DocTest.doctest/1
      test/romans_test.exs:3: RomansTest (module)
      (elixir) lib/code.ex:363: Code.require_file/2
      (elixir) lib/kernel/parallel_require.ex:56: anonymous fn/2 in Kernel.ParallelRequire.spawn_requires/5
  </code></pre>

</section>
<section>

  <pre><code class="elixir" data-trim data-noescape>
  # test/romans_test.exs
  defmodule RomansTest do
    use ExUnit.Case, async: true
    doctest Romans

    describe "Roman.convert/1" do
      test "converts 'I' to 1" do
        assert Romans.convert("I") == 1
      end
    end
  end
  </code></pre>

  <pre><code class="elixir" data-trim data-noescape>
  # lib/romans.exs
  defmodule Romans do
    def convert(_roman) do
      1
    end
  end
  </code></pre>

</section>
<section>

  <pre><code class="bash" data-trim data-noescape>
  $ mix test
  Compiling 1 file (.ex)
  Generated romans app
  .

  Finished in 0.03 seconds
  1 test, 0 failures

  Randomized with seed 832675
  </code></pre>

</section>
<section>

  <pre><code class="elixir" data-trim data-noescape>
  defmodule RomansTest do
    use ExUnit.Case, async: true
    doctest Romans

    describe "Roman.convert/1" do
      test "converts 'I' to 1" do
        assert Romans.convert("I") == 1
      end

      test "converts 'II' to 2" do
        assert Romans.convert("II") == 2
      end
    end
  end
  </code></pre>
</section>
<section>

  <pre><code class="bash" data-trim data-noescape>
  $ mix test
  .

    1) test Roman.convert/1 converts 'II' to 2 (RomansTest)
       test/romans_test.exs:10
       Assertion with == failed
       code: Romans.convert("II") == 2
       lhs:  1
       rhs:  2
       stacktrace:
         test/romans_test.exs:11: (test)

  Finished in 0.04 seconds
  2 tests, 1 failure

  Randomized with seed 762841
  </code></pre>

  </section>
  <section>

  <pre><code class="elixir" data-trim data-noescape>
  defmodule RomansTest do
    use ExUnit.Case, async: true
    doctest Romans

    describe "Roman.convert/1" do
      test "converts 'I' to 1" do
        assert Romans.convert("I") == 1
      end

      test "converts 'II' to 2" do
        assert Romans.convert("II") == 2
      end
    end
  end
  </code></pre>

  <pre><code class="elixir" data-trim data-noescape>
  defmodule Romans do
    def convert(roman) do
      String.length(roman)
    end
  end
  </code></pre>
</section>
  <section>

  <pre><code class="elixir" data-trim data-noescape>
  ...

  test "converts 'II' to 2" do
    assert Romans.convert("II") == 2
  end

  test "converts 'V' to 5" do
    assert Romans.convert("V") == 5
  end
  </code></pre>
</section>

  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert(roman) do
    if roman == "V" do
      5
    else
      String.length(roman)
    end
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert("V") do
    5
  end

  def convert(roman) do
    String.length(roman)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
...

test "converts 'V' to 5" do
  assert Romans.convert("V") == 5
end

test "converts 'X' to 10" do
  assert Romans.convert("X") == 10
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert("X") do
    10
  end

  def convert("V") do
    5
  end

  def convert(roman) do
    String.length(roman)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="bash" data-trim data-noescape>
$ mix test
Compiling 1 file (.ex)
....

Finished in 0.04 seconds
4 tests, 0 failures

Randomized with seed 26252
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert("X") do
    10
  end

  def convert("V") do
    5
  end

  def convert(roman) do
    String.length(roman)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code  class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert("X") do
    String.duplicate("I", 10)
    |> convert
  end

  def convert("V") do
    String.duplicate("I", 5)
    |> convert
  end

  def convert(roman) do
    String.length(roman)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert(romans) do
    romans
    |> map_to_ones
    |> ones_to_integer
  end

  defp map_to_ones(romans) do
    Map.get(%{
      "X" => String.duplicate("I", 10),
      "V" => String.duplicate("I", 5),
    }, romans, romans)
  end

  defp ones_to_integer(ones) do
    String.length(ones)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
...

test "converts 'V' to 5" do
  assert Romans.convert("V") == 5
end

test "converts 'IV' to 4" do
  assert Romans.convert("IV") == 4
end

...
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defp map_to_ones(romans) do
  Map.get(%{
    "X" => String.duplicate("I", 10),
    "V" => String.duplicate("I", 5),
    "IV" => String.duplicate("I", 4)
  }, romans, romans)
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
...

test "converts 'IV' to 4" do
  assert Romans.convert("IV") == 4
end

test "converts 'VII' to 7" do
  assert Romans.convert("VII") == 7
end

...
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
defmodule Romans do
  def convert(romans) do
    romans
    |> to_ones
    |> ones_to_integer
  end

  defp to_ones(romans) do
    romans
    |> String.replace("IV", ones(4))
    |> String.replace("V", ones(5))
    |> String.replace("X", ones(10))
  end

  defp ones_to_integer(ones) do
    String.length(ones)
  end

  defp ones(num) do
    String.duplicate("I", num)
  end
end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
@doc ~S"""
Converts roman numerals to integers

## Examples

    iex> Romans.convert("XII")
    12

"""
def convert(romans) do
  romans

...
    </code></pre>
  </section>
  <section>
    <pre><code class="bash" data-trim data-noescape>
iex(3)> h(Romans.convert)

def convert(romans)

Converts roman numerals to integers

Examples

┃ iex> Romans.convert("XII")
┃ 12

iex(4)>
    </code></pre>
  </section>
</section>
<section>
  <section>
    <h2>Pattern matching</h2>
  </section>
  <section>
    <h2>Fibonacci</h2>
    F0=0<br />
    F1=1<br />
    Fn = Fn-1 + Fn-2
  </section>
  <section>
    F0=0<br />
    F1=1<br />
    Fn = Fn-1 + Fn-2
      <pre><code class="elixir" data-trim data-noescape>
    defmodule Fib do
      def fib(0) do 0 end
      def fib(1) do 1 end
      def fib(n) do fib(n-1) + fib(n-2) end
    end
    IO.puts Fib.fib(10)
  </code></pre>
  or...
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
  defmodule Fib do
    def fib(0) do 0 end
    def fib(1) do 1 end
    def fib(n) do fib(n-1) + fib(n-2) end
  end
</code></pre>

      <pre><code class="elixir" data-trim data-noescape>
  defmodule Fib do
    def fib(n) when n <= 1 do n end
    def fib(n) do fib(n-1) + fib(n-2) end
  end
  </code></pre>
  </section>
  <section>
    Assignments?<br />
    <pre><code class="elixir" data-trim data-noescape>
      iex(1)> a = 5
      5
      iex(2)> a
      5
    </code></pre>
  </section>
  <section>
    What does this do?<br />
    <pre><code class="elixir" data-trim data-noescape>
      iex(1)> {a, 5} = {3, 5}
    </code></pre>
    and this?
    <pre><code class="elixir" data-trim data-noescape>
      iex(3)> {a, 9} = {3, 5}
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
      iex(1)> {a, 5} = {3, 5}
      {3, 5}
      iex(2)> a
      3
      iex(3)> {a, 9} = {3, 5}
      ** (MatchError) no match of right hand side value: [3, 5]
      iex(4)> [name, "Smith"] = ["John", "Smith"]
      ["John", "Smith"]
      iex(5)> name
      "John"
      iex(6)> [name, "Smith"] = ["John", "Burton"]
      ** (MatchError) no match of right hand side value: ["John", "Burton"]

    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
      defmodule Human do
        defstruct name: "", surname: "", age: 0
      end

      defmodule Bar do
        def serve_drinks(%Human{age: age}) when age > 18 do
          {:ok, "Enjoy!"}
        end
        def serve_drinks(%Human{}) do
          {:error, "You are underage."}
        end
        def serve_drinks(_) do
          {:error, "Only serving humans."}
        end
      end
    </code></pre>
  </section>
</section>
<section>
  <section>
    <h2>Error Handling</h2>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
    iex> try do
    ...>   raise "oops"
    ...> rescue
    ...>   e in RuntimeError -> e
    ...> end
    %RuntimeError{message: "oops"}
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
    iex> File.read "hello"
    {:error, :enoent}
    iex> File.write "hello", "world"
    :ok
    iex> File.read "hello"
    {:ok, "world"}
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
    defmodule Read do
      def read_file do
        File.read "hello"
        |> parse
      end

      defp parse({:ok, output}) do
        output
      end

      defp parse({:error, _}) do
        File.write "hello", "world"
        "world"
      end
    end
    </code></pre>
  </section>
</section>
<section>
  <section>
    <h2>Concurrency</h2>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
    defmodule Spawner do
      def spawn_mulitple(0), do: IO.puts "done"
      def spawn_mulitple(num) do
        spawn(&long_process/0)
        spawn_mulitple(num - 1)
      end

      defp long_process do
        Process.sleep(1000)
        IO.puts "tick"
      end
    end
    </code></pre>
  </section>
  <section>
    <pre><code class="elixir" data-trim data-noescape>
    defmodule Spawner do
      def spawn_mulitple(0), do: IO.puts "done"
      def spawn_mulitple(num) do
        spawn(&long_process/0)
        spawn_mulitple(num - 1)
      end

      defp long_process do
        Process.sleep(1000)
        IO.puts "tick"
      end
    end
    </code></pre>
    <pre><code class="elixir" data-trim data-noescape>
    iex(12)> Spawner.spawn_mulitple(1000)
    done
    :ok
    tick
    tick
    </code></pre>
  </section>
  <section>
    spawn_link
  </section>
</section>
<section>
  <section>
    So how do we keep state?
  </section>
</section>
<section>
  <section>
    So how do we keep state?
  </section>
</section>




            </div>
        </div>
        <script src="js/head.min.js"></script>
        <script src="js/highlight.pack.js"></script>
        <script src="js/reveal.js"></script>
        <script>
        Reveal.initialize({
          margin: 0.1,
          dependencies: [
              // Interpret Markdown in <section> elements
              { src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
              { src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },

              // Speaker notes
              { src: 'plugin/notes/notes.js', async: true },
              // MathJax
              { src: 'plugin/math/math.js', async: true }
          ]
          });
        </script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
